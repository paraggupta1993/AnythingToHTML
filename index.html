<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Anythingtohtml by paraggupta1993</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section id="downloadLinks" class="page-header">
      <h1 class="project-name">Anythingtohtml</h1>
      <h2 class="project-tagline">Online Web App for converting any file format to a downloadable HTML file.</h2>
      <div id="msg"> </div> <br/>
      <input type="file" class="btn" id="filefield"/>
      <input type="submit" id="ConvertBtn" value="Convert" class="btn" onclick="submit()"/>
      <img id="spinner" src="./spinner.gif" alt="Working..." style="height:50px;width:50px;vertical-align:top;display:none">

    </section>

    <section class="main-content">


      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/paraggupta1993/AnythingToHTML">Anythingtohtml</a> is maintained by <a href="https://github.com/paraggupta1993">paraggupta1993</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

<script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
<script type="text/javascript">

  $('#filefield').focus();
  var APP_ID = "7ed85924-1cdd-46ea-9b6d-a9c309061335";
  function submit(){
    var file =  document.getElementById("filefield").files[0];
    if(!file){
      $('#msg').html("Please select a file !");
      return false;
    }
    $('#spinner').show();
    $('#ConvertBtn').hide();
    var filename = file.name;
    filename = filename.substring( 0, filename.lastIndexOf('.') );
    var data = new FormData();
    data.append('file', file);
    data.append('apikey', APP_ID);
    data.append('raw_html', true);
    console.log(file);
    $.ajax({
      url: "https://api.idolondemand.com/1/api/sync/viewdocument/v1",
      data: data,
      error: function(jqXHR, textStatus, error){
        console.log(status);
      },
      method: "POST",
      cache: false,
      contentType: false,
      processData: false,
      success: function(data, status, jqXHR){
        console.log(status);
        console.log(data);
        var down = $('<a></a>');
        down.attr('href', 'data:application/octet-stream;charset=utf-16,' + encodeURIComponent(data));
        down.attr('download', filename + '.html');
        down.attr('class','btn');
        down.html('Download:  ' + filename + '.html');
        $('#downloadLinks').append( $('<br/>') );
        $('#downloadLinks').append(down);
        $('#spinner').hide();
        $('#ConvertBtn').show();
        $('#msg').html('');
      }
    });
    return false;
  }
</script>

  </body>
</html>

